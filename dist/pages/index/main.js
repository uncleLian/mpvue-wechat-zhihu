require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([3],{"/Q/l":function(t,e){},"5vTQ":function(t,e,i){"use strict";var n=i("Xxa5"),a=i.n(n),o=i("exGp"),s=i.n(o),r=i("gyMJ"),c=i("0xDb");e.a={data:function(){return{winHeight:0,tabsOption:["日报","推荐主题"],activeIndex:0,articles:[],themes:[],articleBottomLoading:!0,themeBottomLoading:"loading",AniData:""}},mounted:function(){wx.showLoading({title:"加载中",mask:!0}),this.getSystemInfo(),this.getLatestArticle()},methods:{getLatestArticle:function(){var t=this;Object(r.e)().then(function(e){wx.hideLoading(),e&&(e.formatDate=Object(c.a)(e.date),t.articles=[],t.articles.push(e))}).catch(function(){wx.showToast({title:"请求失败，请检查网络",icon:"none",duration:3e3})})},getBeforeArticle:function(){var t=this;if("nothing"!==this.articleBottomLoading&&"error"!==this.articleBottomLoading){this.articleBottomLoading="loading";var e=this.articles[this.articles.length-1].date;Object(r.c)(e).then(function(e){e?(t.articleBottomLoading=!0,e.formatDate=Object(c.a)(e.date),t.articles.push(e)):t.articleBottomLoading="nothing"}).catch(function(){t.articleBottomLoading="error"})}},getThemes:function(){var t=this;this.themeBottomLoading="loading",Object(r.i)().then(function(e){e&&(t.themes=e.others),t.themeBottomLoading="nothing"}).catch(function(){t.themeBottomLoading="error"})},pageChange:function(t){this.activeIndex=t.mp.detail.current,0===this.activeIndex&&0===this.articles.length?this.getLatestArticle():1===this.activeIndex&&0===this.themes.length&&this.getThemes()},getSystemInfo:function(){var t=this;wx.getSystemInfo({success:function(e){t.winHeight=e.windowHeight-50}})}},onPullDownRefresh:function(){var t=this;return s()(a.a.mark(function e(){var i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.activeIndex){e.next=5;break}return e.next=3,t.getLatestArticle();case 3:e.next=7;break;case 5:return e.next=7,t.getThemes();case 7:wx.stopPullDownRefresh(),(i=wx.createAnimation({duration:400,timingFunction:"ease"})).translateY(50).step().translateY(-50).step({delay:2e3}),t.AniData=i.export();case 11:case"end":return e.stop()}},e,t)}))()},onShareAppMessage:function(){return{path:"/pages/index/main"}}}},MhDc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("5nAL"),a=i.n(n),o=i("Qt9A");new a.a(o.a).$mount()},Qt9A:function(t,e,i){"use strict";var n=i("5vTQ"),a=i("Vnx3");var o=function(t){i("/Q/l")},s=i("ybqe")(n.a,a.a,o,null,null);e.a=s.exports},Vnx3:function(t,e,i){"use strict";var n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"index"}},[i("div",{staticClass:"index-tabs"},t._l(t.tabsOption,function(e,n){return i("div",{key:n,staticClass:"tabs-item",class:[t.activeIndex===n?"active":""],attrs:{eventid:"0-"+n},on:{click:function(e){t.activeIndex=n}}},[t._v(t._s(e))])})),t._v(" "),i("div",{staticClass:"index-tips",attrs:{animation:t.AniData,eventid:"1"},on:{transitionend:function(e){t.AniData=""}}},[t._v("已为你拉取最新内容")]),t._v(" "),i("swiper",{staticClass:"index-swiper",attrs:{current:t.activeIndex,eventid:"3"},on:{change:t.pageChange}},[i("swiper-item",{staticClass:"swiper-item",attrs:{mpcomid:"1"}},[i("scroll-view",{style:{height:t.winHeight+"px"},attrs:{"scroll-y":"","enable-back-to-top":!0,eventid:"2"},on:{scrolltolower:t.getBeforeArticle}},[t._l(t.articles,function(t,e){return i("article-list",{key:e,attrs:{id:"articleList-"+e,json:t.stories,date:t.formatDate,mpcomid:"0-"+e}})}),t._v(" "),t.articles.length>0&&t.articleBottomLoading?i("div",{staticClass:"list-bottomLoad"},["loading"===t.articleBottomLoading?i("div",{staticClass:"loading"},[t._v("加载中...")]):t._e(),t._v(" "),"nothing"===t.articleBottomLoading?i("div",{staticClass:"nothing"},[t._v("刷完了，休息一下吧")]):t._e(),t._v(" "),"error"===t.articleBottomLoading?i("div",{staticClass:"error"},[t._v("出错了，刷新试试")]):t._e()]):t._e()],2)],1),t._v(" "),i("swiper-item",{staticClass:"swiper-item",attrs:{mpcomid:"3"}},[i("scroll-view",{style:{height:t.winHeight+"px"},attrs:{"scroll-y":"","enable-back-to-top":!0}},[i("theme-list",{attrs:{json:t.themes,bottomLoading:t.themeBottomLoading,mpcomid:"2"}})],1)],1)],1)],1)},staticRenderFns:[]};e.a=n}},["MhDc"]);